<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <meta charset="utf-8">
    <title>Visual Encoding App</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
</head>
<body>
</body>
<script type="application/javascript">
    var body = d3.select('body');

    var tasks = makeTasks(5);
    var encodings = makeEncodings(5);

    var tabl = makeTable(encodings.length,tasks.length);

    function makeTable(nr,nc) {
        var table = body.append("table")
                .attr("id", "rankTable");
        var trData = [];

        d3.range(0,nr+1).forEach(function(r) {
            var tr = table.append("tr");
            var tdData = [];
            d3.range(0,nc+1).forEach(function(c) {
                var td = tr.append("td")
                        .attr('contenteditable', 'true')
                        .text(function() {
                            if(r === 0) {
                                return tasks[c-1];
                            }
                            if(c === 0) {
                                return encodings[r-1];
                            }
                            return "("+r+","+c+")";
                        });
                tdData.push(td);
            });
            trData.push(tr);
        });
        return(trData);
    }

    function rankTableToJSON() {
        return $('table#rankTable tr').get().map(function(row) {
            return $(row).find('td').get().map(function(cell) {
                return $(cell).html();
            });
        });
    }

    function makeTasks(amount) {
        return d3.range(1,amount+1).map(function(a) {
            return "task"+a;
        });
    }

    function makeEncodings(amount) {
        return d3.range(1,amount+1).map(function(a) {
            return "enc"+a;
        });
    }

</script>
</html>